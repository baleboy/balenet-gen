<!DOCTYPE html>
<html>
  <head>
    <title>Balenet</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inconsolata&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/425a6b9b56.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" type="text/css" href="/style.css">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
  </head>
  <body>
    <div class="page-shell">
      <div class="social-icons">
        <a href="https://linkedin.com/in/frbale"><i class="fab fa-linkedin"></i></a>
        <a href="https://github.com/baleboy"><i class="fab fa-github"></i></a>
      </div>
      <header>
        <div class="header-top">
          <div class="title-wrapper">
            <h1><a href="/">Balenet</a></h1>
          </div>
          <ul class="primary-nav">
            <li><a class="topic-label" href="/work/">Work</a></li>
          </ul>
        </div>
      </header>
      <main>
<article>
    <h2>Updating a 2014 iMac Retina from Mojave to Bigsur</h2>
    <div class="post-meta">
        <time>6 November 2022</time>
        <span class="topic-labels"><a class="topic-label" href="/topics/tech/">Tech</a></span>
    </div>
    <div class="post-body">
        <p>After many failed attempts, I finally managed to update our 2014 27" iMac retina from Mojave to Big Sur. Finding the right information was not easy, so I thought it would be good to write it down in case it ever happens again.</p><p>The main reason the previous updates failed is that they stopped at the error <code>Storage system verify or repair failed 69716</code>, which showed up during the installation of BigSur. It doesn't seem to be a common error, but it is mentioned in this Apple Forum post:</p><p><a href="https://discussions.apple.com/thread/253595285?utm_source=pocket_saves">Storage system verify or repair failed 69â€¦ - Apple Community</a></p><p>Since all of the potential solutions involve repairing or even formatting the disk, not to mention the possibility of the disk failing at any point in time, the first thing I did was to buy an external SSD drive and make a backup with Time Machine (which shamefully enough, I had never done until this point).</p><p>As many posts, including the one above, recommend, I first tried the "Repair" option in Disk Utility (from normal login, in "recovery mode" and in "single user mode"), but no issue was found. I then tried to erase the disk (also from Disk Utility), reinstall from the Time Machine backup and update - but the same error showed up.</p><p>Finally, as suggested in one of the replies to the post, I recreated the fusion drive by going in recovery mode, launching terminal and then giving the command <code>diskutil resetFusion</code>. For good measure I tried a clean install of Mojave from the recovery disk, and then updated to BigSur - this time it worked. This wasn't a very useful step but at least demonstrated that the update <em>could</em> succeed and that there wasn't anything too wrong with the disk. At this point (I probably should have done it in the first place) I restored once more from time machine, launched the OS update and finally was successful.</p><p>Everything seemed to work fine, except that Time Machine couldn't start a backup complaining that the "Macintosh HD Data" volume appeared twice and had to be renamed. It turns out that this volume didn't exist in Mojave but was introduced with... Catalina? and is used to store user data. I don't know why Time Machine thought there were two, but I renamed it "Macintosh HD Data 2" and Time machine was happy again - except that it couldn't do an incremental backup and had to do a new one.</p><p>The shell also changed from bash to zsh, but in the settings inherited from the previous OS the default was still the old bash. The default can be changed with the command:</p><pre><code class="language-bash">chsh -s /bin/zsh
</code></pre><p>The update didn't fix one long-standing problem I had when connecting iOS devices via USB: the device keep disconnecting and reconnecting and no data transfer was possible. This can be fixed by restarting the USB daemon:</p><pre><code class="language-bash">sudo killall -STOP -c usbd
</code></pre><p>Despite all these annoyances, it's a credit to Apple that the iMac is now very responsive and generally still works very well. Makes you wonder why you should buy a new computer.</p><img src="imac.jpg" alt="The mac"/>
    </div>
</article>
    </main>
    <footer>
        <p>&copy; 2025 Francesco Balestrieri - <a href="/about/">Credits</a></p>
    </footer>
    </div>
  </body>
</html>
